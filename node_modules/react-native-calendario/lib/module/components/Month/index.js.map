{"version":3,"sources":["index.tsx"],"names":["React","useMemo","View","Text","Month","moment","isValidDate","getMonthNames","isSameDate","shouldRenderMonth","isMonthDrawn","styles","SHOULD_NOT_UPDATE","EmptyMonth","memo","props","content","height","justifyContent","alignItems","theme","emptyMonthContainerStyle","emptyMonthText","emptyMonthTextStyle","name","MonthTitle","monthTitleText","monthTitleTextStyle","month","year","minDate","maxDate","showMonthTitle","renderAllMonths","monthNames","locale","index","MONTH_NAMES","Array","isArray","length","monthName","firstViewableIndex","viewableRangeOffset","lastViewableIndex","min","Date","toDate","undefined","max","disabledDays","disableOffsetDays","disableRange","startDate","endDate","firstDayMonday","markedDays","onPress","renderDayContent","showWeekdays","dayNames","prevProps","nextProps","currentMonth","firstMonthToRender","add","isSame","startDateChanged","endDateChanged"],"mappings":"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","sourcesContent":["import React, { useMemo } from 'react';\nimport { View, Text } from 'react-native';\nimport { Month, MonthProps } from 'react-native-month';\nimport moment from 'moment';\nimport { isValidDate, getMonthNames, isSameDate } from '../../utils/date';\nimport { shouldRenderMonth, isMonthDrawn } from './utils';\nimport styles from './styles';\nimport { ThemeType } from '../../types';\n\ninterface EmptyMonthProps {\n  height: number;\n  name: string;\n  theme: ThemeType;\n}\n\nconst SHOULD_NOT_UPDATE = true;\n\nconst EmptyMonth = React.memo<EmptyMonthProps>(\n  (props: EmptyMonthProps) => {\n    const content = useMemo(\n      () => ({\n        height: props.height,\n        justifyContent: 'center' as const,\n        alignItems: 'center' as const,\n      }),\n      [props.height]\n    );\n    return (\n      <View style={[content, props.theme.emptyMonthContainerStyle]}>\n        <Text\n          style={[styles.emptyMonthText, props.theme.emptyMonthTextStyle]}\n          allowFontScaling={false}\n        >\n          {props.name}\n        </Text>\n      </View>\n    );\n  },\n  () => SHOULD_NOT_UPDATE\n);\n\ninterface MonthTitleProps {\n  name: string;\n  theme: ThemeType;\n}\n\nconst MonthTitle = React.memo<MonthTitleProps>(\n  (props: MonthTitleProps) => (\n    <Text\n      allowFontScaling={false}\n      style={[styles.monthTitleText, props.theme.monthTitleTextStyle]}\n    >\n      {props.name}\n    </Text>\n  ),\n  () => SHOULD_NOT_UPDATE\n);\n\ninterface Props extends MonthProps {\n  monthNames?: string[];\n  firstMonthToRender: Date;\n  firstViewableIndex: number;\n  lastViewableIndex: number;\n  viewableRangeOffset: number;\n  renderAllMonths?: boolean;\n  showMonthTitle: boolean;\n  height: number;\n  index: number;\n}\n\nexport default React.memo<Props>(\n  (props: Props) => {\n    const {\n      month,\n      year,\n      minDate,\n      maxDate,\n      showMonthTitle,\n      renderAllMonths,\n      monthNames,\n      theme = {},\n      height,\n      locale,\n      index,\n    } = props;\n\n    const MONTH_NAMES =\n      Array.isArray(monthNames) && monthNames.length === 12\n        ? monthNames\n        : getMonthNames(locale);\n    const monthName = `${MONTH_NAMES[month]} ${year}`;\n\n    if (\n      !renderAllMonths &&\n      (index < props.firstViewableIndex - props.viewableRangeOffset ||\n        index > props.lastViewableIndex)\n    ) {\n      return <EmptyMonth name={monthName} height={height} theme={theme} />;\n    }\n\n    const min =\n      minDate && isValidDate(new Date(minDate))\n        ? moment(minDate, 'YYYY-MM-DD').toDate()\n        : undefined;\n    const max =\n      maxDate && isValidDate(new Date(maxDate))\n        ? moment(maxDate, 'YYYY-MM-DD').toDate()\n        : undefined;\n\n    return (\n      <View style={{ height }}>\n        {showMonthTitle && <MonthTitle name={monthName} theme={theme} />}\n        <Month\n          month={month}\n          year={year}\n          disabledDays={props.disabledDays}\n          disableOffsetDays={props.disableOffsetDays}\n          disableRange={props.disableRange}\n          startDate={props.startDate}\n          endDate={props.endDate}\n          firstDayMonday={props.firstDayMonday}\n          locale={props.locale}\n          markedDays={props.markedDays}\n          maxDate={max}\n          minDate={min}\n          onPress={props.onPress}\n          renderDayContent={props.renderDayContent}\n          showWeekdays={props.showWeekdays}\n          theme={props.theme}\n          dayNames={props.dayNames}\n        />\n      </View>\n    );\n  },\n  (prevProps: Props, nextProps: Props) => {\n    if (prevProps.disableRange !== nextProps.disableRange) {\n      return false;\n    }\n\n    if (\n      (prevProps.index <\n        prevProps.firstViewableIndex - prevProps.viewableRangeOffset ||\n        prevProps.index > prevProps.lastViewableIndex) &&\n      nextProps.index >= nextProps.firstViewableIndex &&\n      nextProps.index <= nextProps.lastViewableIndex\n    ) {\n      return false;\n    }\n\n    if (\n      (!nextProps.dayNames || !nextProps.monthNames) &&\n      prevProps.locale !== nextProps.locale\n    ) {\n      return false;\n    }\n\n    const currentMonth = moment(nextProps.firstMonthToRender).add(\n      nextProps.index,\n      'months'\n    );\n\n    if (prevProps.disableRange === nextProps.disableRange) {\n      if (nextProps.disableRange) {\n        if (prevProps.startDate !== nextProps.startDate) {\n          if (\n            !prevProps.startDate &&\n            moment(nextProps.startDate).isSame(currentMonth, 'month')\n          ) {\n            return false;\n          }\n\n          if (\n            prevProps.startDate &&\n            (moment(prevProps.startDate).isSame(currentMonth, 'month') ||\n              moment(nextProps.startDate).isSame(currentMonth, 'month'))\n          ) {\n            return false;\n          }\n        }\n      } else {\n        const startDateChanged =\n          (prevProps.startDate instanceof Date &&\n            nextProps.startDate instanceof Date &&\n            !isSameDate(prevProps.startDate, nextProps.startDate)) ||\n          prevProps.startDate !== nextProps.startDate;\n        const endDateChanged =\n          (prevProps.endDate instanceof Date &&\n            nextProps.endDate instanceof Date &&\n            !isSameDate(prevProps.endDate, nextProps.endDate)) ||\n          prevProps.endDate !== nextProps.endDate;\n\n        if (startDateChanged || endDateChanged) {\n          if (\n            isMonthDrawn(\n              currentMonth.year(),\n              currentMonth.month(),\n              prevProps.startDate,\n              prevProps.endDate\n            ) !==\n              isMonthDrawn(\n                currentMonth.year(),\n                currentMonth.month(),\n                nextProps.startDate,\n                nextProps.endDate\n              ) ||\n            (prevProps.startDate instanceof Date &&\n              moment(prevProps.startDate).isSame(currentMonth, 'month') &&\n              (startDateChanged || endDateChanged)) ||\n            (nextProps.startDate instanceof Date &&\n              moment(nextProps.startDate).isSame(currentMonth, 'month') &&\n              startDateChanged) ||\n            (prevProps.endDate instanceof Date &&\n              moment(prevProps.endDate).isSame(currentMonth, 'month') &&\n              endDateChanged) ||\n            (nextProps.endDate instanceof Date &&\n              moment(nextProps.endDate).isSame(currentMonth, 'month') &&\n              endDateChanged)\n          ) {\n            return false;\n          }\n        }\n      }\n    } else {\n      return false;\n    }\n\n    if (\n      shouldRenderMonth(currentMonth, prevProps.minDate, nextProps.minDate) ||\n      shouldRenderMonth(currentMonth, prevProps.maxDate, nextProps.maxDate)\n    ) {\n      return false;\n    }\n\n    return true;\n  }\n);\n"]}